<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Neon Lane Runner - Game</title>
  <link rel="stylesheet" href="css/game.css">
</head>
<body>
  <!-- 🎮 Canvas -->
  <canvas id="gameCanvas"></canvas>

  <!-- HUD -->
  <div id="hud">
    <span id="score">Score: 0</span> | 
    <span id="lives">Vies: 3</span> | 
    <span id="level">Niveau: 1</span>
    <button id="logoutBtn" class="btn">🚪 Quitter</button>
    <button id="leaderboardBtn" class="btn">🏆 Classement</button>
  </div>

  <!-- Leaderboard Overlay -->
  <div id="leaderboardDiv" class="overlay hidden">
    <div class="leaderboard">
      <h2>🏆 Classement</h2>
      <div id="rankingBoard">Chargement...</div>
      <div id="myRank"></div>
      <button id="closeLeaderboardBtn">Fermer</button>
    </div>
  </div>

  <!-- Scripts -->
  <script type="module">
    import { auth } from "./js/firebase-config.js";
    import { signOut } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
    import { loadLeaderboard, setupLeaderboardClose } from "./js/leaderboard.js";
    import "./js/game.js";

    // 🚪 Déconnexion
    document.getElementById("logoutBtn").onclick = async () => {
      await signOut(auth);
      window.location.href = "index.html";
    };

    // 🏆 Classement
    document.getElementById("leaderboardBtn").onclick = () => {
      document.getElementById("leaderboardDiv").classList.remove("hidden");
      loadLeaderboard();
    };

    setupLeaderboardClose();
  </script>
</body>
</html>
